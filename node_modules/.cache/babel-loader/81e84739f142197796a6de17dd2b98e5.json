{"remainingRequest":"C:\\Users\\Mr chen\\Desktop\\daima\\aiyundong\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Mr chen\\Desktop\\daima\\aiyundong\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\Mr chen\\Desktop\\daima\\aiyundong\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Mr chen\\Desktop\\daima\\aiyundong\\src\\views\\zhifu.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Mr chen\\Desktop\\daima\\aiyundong\\src\\views\\zhifu.vue","mtime":1559628910196},{"path":"C:\\Users\\Mr chen\\Desktop\\daima\\aiyundong\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Mr chen\\Desktop\\daima\\aiyundong\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Mr chen\\Desktop\\daima\\aiyundong\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Mr chen\\Desktop\\daima\\aiyundong\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.to-string\";\nimport \"core-js/modules/es6.regexp.replace\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport headNav from '../components/head-nav.vue';\nexport default {\n  name: 'zhifu',\n  data: function data() {\n    return {\n      pays: {},\n      w: null,\n      PAYSERVER: 'http://demo.dcloud.net.cn/payment/?payid=',\n      adress: {\n        id: '1',\n        name: '陈贤柏',\n        as: '甘肃省 兰州市 安宁区 兰州交通大学 快捷支付服务',\n        tel: '18893910702',\n        arry: ['甘肃省', '兰州市', '安宁区', '兰州交通大学']\n      }\n    };\n  },\n  mounted: function mounted() {\n    var ff = this;\n    this.$root.dd.plusReady(function () {\n      plus.payment.getChannels(function (channels) {\n        for (var i in channels) {\n          var channel = channels[i];\n\n          if (channel.id == 'qhpay' || channel.id == 'qihoo' || channel.id == 'appleiap') {\n            continue;\n          }\n\n          ff.pays[channel.id] = channel;\n          ff.checkServices(channel);\n        }\n      }, function (e) {\n        plus.nativeUI.alert('获取支付通道失败：' + e.message);\n      });\n    });\n    this.$store.commit('showBottomNav', false);\n  },\n  methods: {\n    sure: function sure() {\n      this.$refs.bian.style.display = 'none';\n      this.adress.as = this.adress.arry.toString().replace(/[,]/g, ' ');\n    },\n    edit: function edit() {\n      this.$refs.bianji.style.color = '#5c5959';\n    },\n    editend: function editend() {\n      this.$refs.bianji.style.color = '#9B9B9B';\n      this.$refs.bian.style.display = 'block';\n    },\n    checkServices: function checkServices(pc) {\n      if (!pc.serviceReady) {\n        var txt = null;\n\n        switch (pc.id) {\n          case 'alipay':\n            txt = '检测到系统未安装“支付宝快捷支付服务”，无法完成支付操作，是否立即安装？';\n            break;\n\n          default:\n            txt = '系统未安装“' + pc.description + '”服务，无法完成支付，是否立即安装？';\n            break;\n        }\n\n        plus.nativeUI.confirm(txt, function (e) {\n          if (e.index == 0) {\n            pc.installService();\n          }\n        }, pc.description);\n      }\n    },\n    pay: function pay(id) {\n      if (this.w) {\n        return;\n      } //检查是否请求订单中\n\n\n      var url = this.PAYSERVER;\n\n      if (id == 'alipay' || id == 'wxpay') {\n        url += id;\n      } else {\n        plus.nativeUI.alert('当前环境不支持此支付通道！', null, '捐赠');\n        return;\n      }\n\n      var appid = plus.runtime.appid;\n\n      if (navigator.userAgent.indexOf('StreamApp') >= 0) {\n        appid = 'Stream';\n      }\n\n      url += '&appid=' + appid + '&total=';\n      this.w = plus.nativeUI.showWaiting(); // 请求支付订单\n\n      var amount = this.$store.state.total;\n      var xhr = new XMLHttpRequest();\n      var ff = this;\n\n      xhr.onreadystatechange = function () {\n        switch (xhr.readyState) {\n          case 4:\n            ff.w.close();\n            ff.w = null;\n\n            if (xhr.status == 200) {\n              var order = xhr.responseText;\n              plus.payment.request(ff.pays[id], order, function (result) {\n                plus.nativeUI.alert('支付成功：感谢你的支持，我们会继续努力完善产品。', function () {\n                  back();\n                }, '捐赠');\n              }, function (e) {\n                plus.nativeUI.alert('很遗憾', null, '支付失败：' + e.code);\n              });\n            } else {\n              plus.nativeUI.alert('获取订单信息失败！', null, '捐赠');\n            }\n\n            break;\n\n          default:\n            break;\n        }\n      };\n\n      xhr.open('GET', url + amount);\n      xhr.send();\n    }\n  },\n  beforeDestroy: function beforeDestroy() {\n    this.$store.commit('showBottomNav', true);\n  },\n  components: {\n    headNav: headNav\n  }\n};",{"version":3,"sources":["zhifu.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n\t<div class=\"address\">\r\n\t\t<head-nav>支付</head-nav>\r\n\t\t<ul adress class=\"box\">\r\n\t\t\t<div class=\"titleHeader\">\r\n\t\t\t\t<div class=\"name\">收货人：{{adress.name}}</div>\r\n\t\t\t\t<div class=\"tel\">{{adress.tel}}</div>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"titleMian\">\r\n\t\t\t\t<div class=\"asHeader\">收货地址：</div>\r\n\t\t\t\t<div class=\"as\">{{adress.as}}</div>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"tools\">\r\n\t\t\t\t<div @touchstart='edit' class=\"edit\" @touchend='editend' ref=\"bianji\">\r\n\t\t\t\t\t<i class=\"mui-icon mui-icon-compose\"></i>编辑\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</ul>\r\n\t\t<ul class=\"mui-table-view mui-table-view-chevron\"  ref=\"bian\" :style=\"{display:'none'}\">\r\n\t\t\t<li>\r\n\t\t\t\t<p>收货人</p>\r\n\t\t\t\t<div><input type=\"text\" placeholder=\"流沙河\" v-model.lazy=\"adress.name\"></div>\r\n\t\t\t</li>\r\n\t\t\t<li>\r\n\t\t\t\t<p>手机号码</p>\r\n\t\t\t\t<div><input type=\"text\" v-model.lazy=\"adress.tel\"></div>\r\n\t\t\t</li>\r\n\t\t\t<li>\r\n\t\t\t\t<p>省/市/区</p>\r\n\t\t\t\t<div class=\"three\">\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<input type=\"text\" v-model.lazy=\"adress.arry[0]\">\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<input type=\"text\"  v-model.lazy=\"adress.arry[1]\">\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<input type=\"text\"  v-model.lazy=\"adress.arry[2]\">\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t</li>\r\n\t\t\t<li>\r\n\t\t\t\t<p>详细地址</p>\r\n\t\t\t\t<div><input type=\"text\" v-model.lazy=\"adress.arry[3]\"></div>\r\n\t\t\t</li>\r\n\t\t\t<li>\r\n\t\t\t\t<div class=\"submit\"><button @click=\"sure\">确认</button></div>\r\n\t\t\t</li>\r\n\t\t</ul>\r\n\t\t<div class=\"ali\" @click=\"pay('alipay')\">支付宝支付</div>\r\n\t\t<div class=\"wx\" @click=\"pay('wxpay')\">微信支付</div>\r\n\t</div>\r\n</template>\r\n\r\n<style scoped=\"scoped\">\r\n.tools::after{\r\n\tcontent: '';\r\n\tdisplay: block;\r\n\tclear: both;\r\n}\r\n.edit{\r\n\tfloat: right;\r\n\tcolor: #9B9B9B;\r\n}\r\n.as{\r\n\tflex: 1;\r\n}\r\n.asHeader{\r\n\twidth: 1.6rem;\r\n}\r\n.titleMian{\r\n\tcolor: #BCBCBC;\r\n\tpadding: .3rem 0;\r\n\tdisplay: flex;\r\n\tline-height: 1.4;\r\n}\r\n.titleHeader{\r\n\tdisplay: flex;\r\n\tjustify-content: space-between;\r\n\tfont-size: .36rem;\r\n\tfont-weight: 500;\r\n}\r\n\r\n.box{\r\n\tbackground: #FFFFFF;\r\n\tmargin: .2rem 0;\r\n\tborder-bottom: solid 1px #D7D7D7;\r\n}\r\n\tul {\r\n\t\tlist-style: none;\r\n\t\tpadding: 0.4rem;\r\n\t}\r\n\t.address ul li p {\r\n\t\tfont-size: .15rem;\r\n\t\tline-height: 0.7rem;\r\n\t}\r\n\r\n\t.address ul li div {\r\n\t\tborder: 1px solid #333;\r\n\t\theight: 0.8rem;\r\n\t}\r\n\r\n\t.address ul li .three {\r\n\t\tdisplay: flex;\r\n\t\tborder: none;\r\n\t\tjustify-content: space-between;\r\n\t}\r\n\r\n\t.address ul li .three div {\r\n\t\twidth: 30%;\r\n\t}\r\n\r\n\t.address ul li div input,\r\n\t.address ul li div button {\r\n\t\twidth: 100%;\r\n\t\theight: 0.7rem;\r\n\t\tline-height: 0.7rem;\r\n\t\tborder: none;\r\n\t\tbackground: none;\r\n\t\tfont-size: .25rem;\r\n\t}\r\n\r\n\t.address ul li div input {\r\n\t\ttext-indent: 0.4em;\r\n\t}\r\n\r\n\t.address ul li div.submit {\r\n\t\tbackground: #ffe828;\r\n\t\tborder: none;\r\n\t\tmargin-top: 0.4rem;\r\n\t}\r\n\t.ali{\r\n\t\twidth: 60%;\r\n\t\theight: 1rem;\r\n\t\tborder-radius: 0.5rem;\r\n\t\tbackground: #019FE8;\r\n\t\tmargin: 0.3rem auto;\r\n\t\tline-height: 1rem;\r\n\t\tcolor: #FFFFFF;\r\n\t\ttext-align: center;\r\n\t}\r\n\t.wx{\r\n\t\twidth: 60%;\r\n\t\theight: 1rem;\r\n\t\tborder-radius: 0.5rem;\r\n\t\tbackground: #05C963;\r\n\t\tmargin: 0.3rem auto;\r\n\t\tline-height: 1rem;\r\n\t\tcolor: #FFFFFF;\r\n\t\ttext-align: center;\r\n\t}\r\n\t.ali:hover{\r\n\t\tbackground:#0b7fb4;\r\n\t}\r\n\t.wx:hover{\r\n\t\tbackground:#26a663;\r\n\t}\r\n</style>\r\n\r\n<script>\r\n\timport headNav from '../components/head-nav.vue'\r\n\texport default {\r\n\t\tname:'zhifu',\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tpays: {},\r\n\t\t\t\tw:null,\r\n\t\t\t\tPAYSERVER:'http://demo.dcloud.net.cn/payment/?payid=',\r\n\t\t\t\tadress:\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid:'1',\r\n\t\t\t\t\t\tname:'陈贤柏',\r\n\t\t\t\t\t\tas:'甘肃省 兰州市 安宁区 兰州交通大学 快捷支付服务',\r\n\t\t\t\t\t\ttel:'18893910702',\r\n\t\t\t\t\t\tarry:['甘肃省','兰州市','安宁区','兰州交通大学']\r\n\t\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\tvar ff=this;\r\n\t\t\tthis.$root.dd.plusReady(function () {\r\n\t\t\t    plus.payment.getChannels(function(channels){\r\n\t\t\t    \tfor(var i in channels){\r\n\t\t\t    \t\tvar channel=channels[i];\r\n\t\t\t    \t\tif(channel.id=='qhpay'||channel.id=='qihoo'||channel.id=='appleiap'){\r\n\t\t\t    \t\t\tcontinue;\r\n\t\t\t    \t\t}\r\n\t\t\t    \t\tff.pays[channel.id]=channel;\r\n\t\t\t    \t\tff.checkServices(channel);\r\n\t\t\t    \t}\r\n\t\t\t    },function(e){\r\n\t\t\t    \tplus.nativeUI.alert('获取支付通道失败：'+e.message);\r\n\t\t\t    });\r\n\t\t\t})\r\n\t\t\tthis.$store.commit('showBottomNav', false);\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tsure(){\r\n\t\t\t\tthis.$refs.bian.style.display='none';\r\n\t\t\t\tthis.adress.as=this.adress.arry.toString().replace(/[,]/g,' ')\r\n\t\t\t},\r\n\t\t\tedit(){\r\n\t\t\t\tthis.$refs.bianji.style.color='#5c5959'\r\n\t\t\t},\r\n\t\t\teditend(){\r\n\t\t\t\tthis.$refs.bianji.style.color='#9B9B9B'\r\n\t\t\t\tthis.$refs.bian.style.display='block'\r\n\t\t\t},\r\n\t\t\tcheckServices(pc){\r\n\t\t\t\tif(!pc.serviceReady){\r\n\t\t\t\t\tvar txt=null;\r\n\t\t\t\t\tswitch(pc.id){\r\n\t\t\t\t\t\tcase 'alipay':\r\n\t\t\t\t\t\ttxt='检测到系统未安装“支付宝快捷支付服务”，无法完成支付操作，是否立即安装？';\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\ttxt='系统未安装“'+pc.description+'”服务，无法完成支付，是否立即安装？';\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tplus.nativeUI.confirm(txt, function(e){\r\n\t\t\t\t\t\tif(e.index==0){\r\n\t\t\t\t\t\t\tpc.installService();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}, pc.description);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tpay(id){\r\n\t\t\t\tif(this.w){return;}//检查是否请求订单中\r\n\t\t\t\tvar url=this.PAYSERVER;\r\n\t\t\t\tif(id=='alipay'||id=='wxpay'){\r\n\t\t\t\t\turl+=id;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tplus.nativeUI.alert('当前环境不支持此支付通道！', null, '捐赠');\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tvar appid=plus.runtime.appid;\r\n\t\t\t\tif(navigator.userAgent.indexOf('StreamApp')>=0){\r\n\t\t\t\t\tappid='Stream';\r\n\t\t\t\t}\r\n\t\t\t\turl+='&appid='+appid+'&total=';\r\n\t\t\t\t\r\n\t\t\t\tthis.w=plus.nativeUI.showWaiting();\r\n\t\t\t\t// 请求支付订单\r\n\t\t\t\tvar amount = this.$store.state.total;\r\n\t\t\t\tvar xhr=new XMLHttpRequest();\r\n\t\t\t\tvar ff=this;\r\n\t\t\t\txhr.onreadystatechange=function(){\r\n\t\t\t\t\tswitch(xhr.readyState){\r\n\t\t\t\t\t\tcase 4:\r\n\t\t\t\t\t\tff.w.close();ff.w=null;\r\n\t\t\t\t\t\tif(xhr.status==200){\r\n\t\t\t\t\t\t\tvar order=xhr.responseText;\r\n\t\t\t\t\t\t\tplus.payment.request(ff.pays[id],order,function(result){\r\n\t\t\t\t\t\t\t\tplus.nativeUI.alert('支付成功：感谢你的支持，我们会继续努力完善产品。',function(){\r\n\t\t\t\t\t\t\t\t\tback();\r\n\t\t\t\t\t\t\t\t},'捐赠');\r\n\t\t\t\t\t\t\t},function(e){\r\n\t\t\t\t\t\t\t\tplus.nativeUI.alert('很遗憾', null, '支付失败：'+e.code);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tplus.nativeUI.alert('获取订单信息失败！', null, '捐赠');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\txhr.open('GET',url+amount);\r\n\t\t\t\txhr.send();\r\n\t\t\t}\r\n\t\t},\r\n\t\tbeforeDestroy() {\r\n\t\t\tthis.$store.commit('showBottomNav', true);\r\n\t\t},\r\n\t\tcomponents: {\r\n\t\t\theadNav\r\n\t\t},\r\n\t}\r\n</script>\r\n\r\n\r\n"],"sourceRoot":"src/views"}]}